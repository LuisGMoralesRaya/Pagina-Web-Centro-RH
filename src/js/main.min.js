var $header = $('#main-header');
var $footer = $('#main-footer');
var lastScrollTop = 0;
$(window).scroll(function (event) {
    var st = $(this).scrollTop();
    if (st >= 1) {
        $("header").addClass("stickyHeader");
        $(".mainHeader-menu").attr("m-slide", "false");
    } else {
        $("header").removeClass("stickyHeader");
    }
    lastScrollTop = st;
});
$(document).ready(function () {
    $('.slick-carousel').slick({
        arrows: true,
        centerPadding: "0px",
        dots: false,
        slidesToShow: 1,
        infinite: false,
        prevArrow: $('.prev'),
        nextArrow: $('.next'),
      });
      $(document).on("click",".mainHeader-menuMobile", openMenu);
      $(document).on("click",".mainHeader-menu nav .closeMobile", closeMenu);
      $(document).on("click",".nosotros-content .titulos .titulo", tabsInformacion);
      
});
$(window).on('load', function () {
    function closeLoader() {
        $("body").addClass("page-loaded");
    }
    setTimeout(closeLoader, 500);
    $.ajax({
        url: 'header-footer.html',
        cache: false,
    }).done(function (html) {
        buildHFLGMR(html);
    });
});
$('.slick-carousel').on('beforeChange', function(event, slick, currentSlide, nextSlide){
    console.log(nextSlide);
    if(nextSlide == 1){
        var st = $(this).scrollTop();
        if (st >= 1) {
            $$("#section1").attr("m-background", "true");
            $(".mainHeader-menu").attr("m-slide", "true");
        }
        $("#section1").attr("m-background", "true");
        $(".mainHeader-menu").attr("m-slide", "true");
    }else if(nextSlide == 0){
        $("#section1").attr("m-background", "false");
        $(".mainHeader-menu").attr("m-slide", "false");
    }
 });



//Funciones
function buildHFLGMR(html) {
    $header.html(
        $(
            $(html)
                .filter('.mainHeader')
                .get(0)
        ).html()
    );
    $footer.html(
        $(
            $(html)
                .filter('.mainFooter')
                .get(0)
        ).html()
    );

}
function openMenu(){
    $(".mainHeader-menu nav").attr("m-open","true");
}
function closeMenu(){
    $(".mainHeader-menu nav").attr("m-open","false");
}
function tabsInformacion(){
    $(".nosotros-content .titulos .titulo").attr("m-active", "flase");
    $(this).attr("m-active", "true");
    var tipoTab = $(this).attr("m-name");
    var contentTab = $(".contenidoTextos").attr("m-name");
    $(".contenidoTextos").each( function () {
        if($(this).attr("m-name") == tipoTab){
            $(".contenidoTextos").attr("m-active", "false");
            $("#"+tipoTab).attr("m-active", "true");
        }
    })
    
}
